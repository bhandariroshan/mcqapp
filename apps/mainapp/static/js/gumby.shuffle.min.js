!function(){"use strict";function e(e){Gumby.debug("Initializing Checkbox",e);this.$el=e;this.$children=[];this.children=[];this.shuffles=[];this.def="";this.current="";var t=this;this.setup();$(window).on("load resize",function(){t.handleTests()});this.$el.on("gumby.shuffle",function(){Gumby.debug("Shuffle event triggered",t.$el);t.handleTests()}).on("gumby.initialize",function(){Gumby.debug("Re-initializing shuffle module",t.$el);t.setup()})}e.prototype.setup=function(){this.$children=this.$el.children(Gumby.selectAttr.apply(this.$el,["children"]));this.children=$.makeArray(this.$children);this.shuffles=this.parseAttrValue(Gumby.selectAttr.apply(this.$el,["shuffle"]));this.def=this.defaultSequence(this.$children.length);this.current="default"};e.prototype.handleTests=function(){var e=this,t=false;if(window.matchMedia){$(this.shuffles).each(function(n,r){if(window.matchMedia(r.test).matches){if(e.current!==r.test){e.current=r.test;e.shuffle(r.sequence)}t=true;return false}})}if(!t&&this.current!=="default"){this.current="default";e.shuffle(this.def)}};e.prototype.shuffle=function(e){var t=this,n=[],r=[];if(e){n=e.split("-");$(n).each(function(e){r.push($(t.children[Number(n[e])]))})}else{r=this.children}this.$children.remove();$(r).each(function(){t.$el.append($(this))});Gumby.debug("Children shuffled",r,t.$el);Gumby.debug("Triggering onShuffle event",this.$el);this.$el.trigger("gumby.onShuffle",[$(r)])};e.prototype.defaultSequence=function(e){var t="",n=0;for(n;n<e;n++){t+=n+"-"}return t.substr(0,t.length-1)};e.prototype.parseAttrValue=function(e){var t=e.split(","),n=[],r=[];$(t).each(function(e,t){r=t.split("|");if(r.length!==2){return true}n.push({test:r[0],sequence:r[1]})});return n};Gumby.addInitalisation("shuffle",function(t){$("[data-shuffle],[gumby-shuffle],[shuffle]").each(function(){var n=$(this);if(n.data("isShuffle")&&!t){return true}else if(n.data("isShuffle")&&t){n.trigger("gumby.initialize");return true}n.data("isShuffle",true);new e(n)})});Gumby.UIModule({module:"shuffle",events:["onShuffle","shuffle"],init:function(){Gumby.initialize("shuffle")}})}()