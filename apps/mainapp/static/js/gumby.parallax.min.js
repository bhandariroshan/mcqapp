!function(){"use strict";function e(e){Gumby.debug("Initializing Parallax",e);this.$el=e;this.$holder={};this.ratio=this.offset=0;var t=this;this.setup();this.$el.on("gumby.initialize",function(){Gumby.debug("Re-initializing Parallax",t.$el);t.setup()});this.setPosition();this.$holder.scroll(function(){t.scroll()});this.scroll()}if(Gumby.gumbyTouch){return}e.prototype.setup=function(){this.$holder=Gumby.selectAttr.apply(this.$el,["holder"]);this.ratio=Number(Gumby.selectAttr.apply(this.$el,["parallax"]))||1;this.offset=Number(Gumby.selectAttr.apply(this.$el,["offset"]))||0;this.xPos=this.$el.css("backgroundPosition").split(" ")[0];if(!this.xPos||this.xPos==="0%"){this.xPos="50%"}this.startPos=(this.$el.offset().top-this.offset)*this.ratio;if(this.$holder){this.$holder=$(this.$holder)}if(!this.$holder||!this.$holder.length){this.$holder=$(window)}else{this.startPos-=this.$holder.offset().top}};e.prototype.scroll=function(){this.setPosition(this.startPos-this.$holder.scrollTop()*this.ratio)};e.prototype.setPosition=function(e){this.$el.css("backgroundPosition",this.xPos+" "+e+"px")};Gumby.addInitalisation("parallax",function(){$(".parallax").each(function(){var t=$(this);if(t.data("isParallax")){return true}t.data("isParallax",true);new e(t)})});Gumby.UIModule({module:"parallax",events:[],init:function(){Gumby.initialize("parallax")}})}()